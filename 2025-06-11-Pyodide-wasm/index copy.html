<!-- This is a simple HTML page that uses Pyodide to run Python code in the browser.
     It includes a text area for input, a button to run the code, and an output area. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pyodide Demo</title>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    textarea { width: 100%; height: 150px; font-family: monospace; }
    #output { white-space: pre; background: #fff; padding: 10px; border: 1px solid #ccc; }
    button { padding: 10px 20px; margin-top: 10px; }
  </style>
</head>
<body>

  <h2>ğŸ§ª Pyodide åœ¨çº¿ Python Demo</h2>
  <p>åœ¨ä¸‹æ–¹è¾“å…¥ Python ä»£ç ï¼Œç‚¹å‡»â€œè¿è¡Œâ€æ¥æ‰§è¡Œã€‚</p>

  <textarea id="code">
print("Hello from Pyodide!")
for i in range(5):
    print("Number", i)
  </textarea>

  <br>
  <button onclick="runCode()">è¿è¡Œ Python ä»£ç </button>

  <h3>ğŸ” è¾“å‡ºï¼š</h3>
  <pre id="output">ï¼ˆè¿è¡Œç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼‰</pre>


<script>
  let pyodideReadyPromise = loadPyodide();

  async function runCode() {
    const outputDiv = document.getElementById("output");
    const code = document.getElementById("code").value;
    outputDiv.textContent = "â³ æ­£åœ¨è¿è¡Œï¼Œè¯·ç¨å€™...";

    const pyodide = await pyodideReadyPromise;

    try {
      outputDiv.textContent = ""; // æ¸…ç©ºæ—§è¾“å‡º

      // è®¾ç½® stdout/stderr
      pyodide.setStdout({
        batched: (s) => {
        //   console.log("STDOUT:", JSON.stringify(s)); // è°ƒè¯•è¾“å‡º
          outputDiv.textContent += s + "\n"; // æ‰‹åŠ¨æ·»åŠ æ¢è¡Œ
        }
      });

      pyodide.setStderr({
        batched: (s) => {
        //   console.log("STDERR:", JSON.stringify(s)); // è°ƒè¯•è¾“å‡º
          outputDiv.textContent += s + "\n"; // æ‰‹åŠ¨æ·»åŠ æ¢è¡Œ
        }
      });

      await pyodide.runPythonAsync(code);
    } catch (err) {
      outputDiv.textContent = `âŒ é”™è¯¯:\n${err}`;
    }
  }
</script>



</body>
</html>